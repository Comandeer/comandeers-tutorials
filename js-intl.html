<!DOCTYPE html>
	<html lang="pl" dir="ltr" class="no-js">
		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<script>
			(function(H,c){H[c]=H[c].replace(/\bno-js\b/,'')+' js'})(document.documentElement,'className');

			if ( location.host === 'tutorials.comandeer.pl' ) {
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','//www.google-analytics.com/analytics.js','ga');


				ga('create', 'UA-33158520-2', 'auto');
				ga('send', 'pageview');
			}

			/*
			 Details primitive polyfill by Comandeer
			 */
			"open"in document.createElement("details")||document.addEventListener("DOMContentLoaded",function(){try{[].forEach.call(document.querySelectorAll("details"),function(e){var t=e.querySelector("summary"),n=function(n){n?(e.removeAttribute("open"),t.setAttribute("aria-expanded",!1)):(e.setAttribute("open","open"),t.setAttribute("aria-expanded",!0))},i=function(){n(e.hasAttribute("open"))};n(!e.hasAttribute("open")),t.setAttribute("tabindex",0),t.setAttribute("role","button"),t.addEventListener("click",i),t.addEventListener("keyup",function(e){-1!==[13,32].indexOf(e.keyCode)&&(e.preventDefault(),this.click())})})}catch(e){}})
			</script>
			<title>Data po polsku
				</title>
			<!--[if lt IE 9]>
				<script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
			<![endif]-->
			<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Roboto:300,400,500,700%7CMaterial+Icons">
			<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.deep_purple-indigo.min.css">
			<link rel="stylesheet" href="/css/prism.css">
			<link rel="stylesheet" href="/css/custom.css">
		</head>
		<body>
			<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
				<header class="mdl-layout__header">
					<div class="mdl-layout__header-row">
							<h1 class="mdl-layout-title">
								<a href="/" class="mdl-layout-title__link mdl-color-text--white" title="« Powrót do spisu tutoriali">Tutorials</a>
							</h1>
					</div>
				</header>

				<div class="mdl-layout__drawer mdl-layout__drawer--wide">
			<span class="mdl-layout-title">
				<a href="/" class="mdl-layout-title__link" title="« Powrót do spisu tutoriali">Tutorials</a>
			</span>
			<nav>
				<ul class="mdl-navigation">
				<li class="mdl-navigation__item">
				<a href="#po-staremu" class="mdl-navigation__link">Po staremu
				</a>
			</li><li class="mdl-navigation__item">
				<a href="#Intl" class="mdl-navigation__link"><code class="mdl-color--white mdl-color-text--orange-600">Intl</code> na ratunek!
				</a>
			</li><li class="mdl-navigation__item">
				<a href="#formatujemy" class="mdl-navigation__link">Formatujemy datę
				</a>
			</li>
				</ul>
			</nav>
		</div>

				<div class="mdl-layout__content">
					<main class="content mdl-grid mdl-grid--no-spacing">
						<article class="mdl-cell--12-col">
							<h2 class="mdl-typography--display-3" id="start">Data po polsku<a href="#start" title="Bezpo&#x15B;redni link do sekcji"><span class="material-icons" aria-hidden="true">link</span><span class="sr-only">Bezpośredni link do sekcji</span></a>
				</h2>
<p class="tutorials-note ">Dzisiaj będzie krótko, rzeczowo i na temat (co dość rzadko mi się zdarza). Otóż: jak <b>dobrze</b> zrobić datę po polsku w JS i się przy tym nie narobić.</p>

<h3 class="mdl-typography--display-2" id="po-staremu">Po staremu<a href="#po-staremu" title="Bezpo&#x15B;redni link do sekcji"><span class="material-icons" aria-hidden="true">link</span><span class="sr-only">Bezpośredni link do sekcji</span></a>
				</h3>
<p class="tutorials-note ">Dotąd jedynym właściwym sposobem były różne dziwne kombinacje typu "stwórzmy sobie tablicę z polskimi nazwami miesięcy i dni tygodnia, a następnie podstawiajmy pod dane, zwracane przez <code class="mdl-color--white mdl-color-text--orange-600">new Date</code>". Mogą one wyglądać <a href="http://webmade.org/porady/data-po-polsku-js.php">rozwlekle i odpychająco</a> (a ich autorem nie jest Polak). Mogą być też <a href="http://phpjs.org/functions/strftime/">wzorowane na innych językach</a>, stając się jeszcze bardziej rozwlekłe i… nie JS-owe. Mogą w końcu zmienić się po prostu w wywołanie odpowiedniej, krótkiej funkcyjki w PHP, po stwierdzeniu, że JS się do tego nie nadaje.</p>

<h3 class="mdl-typography--display-2" id="Intl"><code class="mdl-color--white mdl-color-text--orange-600">Intl</code> na ratunek!<a href="#Intl" title="Bezpo&#x15B;redni link do sekcji"><span class="material-icons" aria-hidden="true">link</span><span class="sr-only">Bezpośredni link do sekcji</span></a>
				</h3>
<p class="tutorials-note ">Na szczęście się to zmieniło. I to nie znowu tak niedawno (bo w 2012). Wtedy powstał standard <a href="http://www.ecma-international.org/ecma-402/1.0/">ECMA-402 (ECMAScript Internationalization API)</a>. Oczywiście na odzew ze strony producentów przeglądarek trzeba było ciut poczekać, niemniej – jeśli wierzyć <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl#Browser_Compatibility">MDN</a> – działa dziś wszędzie, oprócz Safari i – co prawdopodobnie może być o wiele ważniejsze – node.js (jednak od czego jest niezawodny GitHub i <a href="https://github.com/andyearnshaw/Intl.js">polyfille</a>; oczywiście w node.js/io.js <a href="https://github.com/nodejs/io.js#intl-ecma-402-support">obsługę można sobie wkompilować</a>).</p>
<p class="tutorials-note ">Cały standard składa się z 3 głównych "klas", zamkniętych w krótkiej i schludnej przestrzeni nazw – <code class="mdl-color--white mdl-color-text--orange-600">Intl</code>. Są to:</p>
<ul>
	<li> <code class="mdl-color--white mdl-color-text--orange-600">Intl.Collator</code> – służący do porównywania tekstu
	</li><li> <code class="mdl-color--white mdl-color-text--orange-600">Intl.NumberFormat</code> – służący do formatowania wszelkiej maści liczb (między innymi walut czy liczebników porządkowych)
	</li><li> <code class="mdl-color--white mdl-color-text--orange-600">Intl.DateTimeFormat</code> – tak, tego właśnie użyjemy
</li></ul>

<h3 class="mdl-typography--display-2" id="formatujemy">Formatujemy datę<a href="#formatujemy" title="Bezpo&#x15B;redni link do sekcji"><span class="material-icons" aria-hidden="true">link</span><span class="sr-only">Bezpośredni link do sekcji</span></a>
				</h3>
<p class="tutorials-note ">Żeby wyświetlić ładną datę po polsku, musimy stworzyć nowy obiekt "klasy" <code class="mdl-color--white mdl-color-text--orange-600">Intl.DateTimeFormat</code>. Jako pierwszy parametr konstruktor bierze nazwę języka (oczywiście zgodną ze standardem ISO, zatem dwuliterowy skrót):</p>
<p class="code">Kod:</p><pre><code class="language-javascript">var formatter = new Intl.DateTimeFormat( 'pl' );</code></pre>
<p class="tutorials-note ">Już! Pierwszy krok za nami. Mamy obiekt wyświetlający datę po polsku. Udostępnia on aż jedną metodę – <code class="mdl-color--white mdl-color-text--orange-600">format</code> – która formatuje przekazaną jej datę (jeśli jej nie podamy, zastosuje aktualną – przynajmniej w Chrome; polecam jednak ją podawać dla zwiększenia czytelności kodu).</p>
<p class="code">Kod:</p><pre><code class="language-javascript">formatter.format( new Date() ); // 23.7.2016</code></pre>
<p class="tutorials-note ">Jak widać, mało imponujące. Równie dobrze można to uznać za datę po angielsku. Na pomoc przychodzi nam drugi parametr konstruktora <code class="mdl-color--white mdl-color-text--orange-600">Intl.DateTimeFormat</code> – jest to obiekt opcji. Przyjrzyjmy się takiemu przykładowi:</p>
<p class="code">Kod:</p><pre><code class="language-javascript">var formatter = new Intl.DateTimeFormat( 'pl', {
	day: 'numeric',
	month: 'long',
	year: 'numeric'
} );
formatter.format( new Date() ); // 23 lipca 2016</code></pre>
<p class="tutorials-note "><i>Voila!</i> To jest dokładnie to, o co nam chodziło. Oczywiście opcji jest więcej, po dokładny ich spis <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat#Parameters">zapraszam na MDN</a>.</p>

						</article>

						<section id="komentarze" class="mdl-cell--12-col">
							<h2 class="mdl-typography--title">Komentarze</h2>
							<div id="disqus_thread"></div>
							<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
							<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
						</section>
					</main>

					<footer class="mdl-mini-footer">
						<div class="mdl-mini-footer__left-section">
							<p>Copyright © by <a href="https://www.comandeer.pl" class="mdl-color-text--white" rel="author">Comandeer</a>.</p>
						</div>
					</footer>
				</div>
			</div>

			<script>
			( function() {
				try {
					var codes = document.getElementsByClassName( 'code' );

					[].forEach.call( codes, function( code ) {
						var next = code.nextElementSibling;

						if ( !next || next.tagName.toLowerCase() !== 'pre' || next.scrollHeight < 300 ) {
							return false;
						}

						code.innerHTML = code.innerHTML.replace( ':', ' <span class="code-switch">[Rozwiń]</span>:' );
						code.getElementsByTagName( 'span' )[ 0 ].toSwitch = next;
					} );

					document.addEventListener( 'click', function( evt ) {
						if ( !evt.target || !evt.target.classList.contains( 'code-switch' ) ) {
							return true;
						}

						evt.preventDefault();

						var target = evt.target,
							next = target.toSwitch,
							html = target.innerHTML;

						if ( !next || next.tagName.toLowerCase() !== 'pre' ) {
							return false;
						}

						next.classList.toggle( 'expanded' );
						target.innerHTML = ( html === '[Zwiń]' ? '[Rozwiń]' : '[Zwiń]' );
					} );

					//defer loading of disqus

					if ( location.host === 'tutorials.comandeer.pl' ) {
						window.disqus_shortname = 'comandeerowa';

						var dsq = document.createElement( 'script' );

						dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';

						( document.getElementsByTagName( 'head' )[ 0 ] || document.getElementsByTagName( 'body' )[ 0 ] ).appendChild( dsq );
					}
				} catch( err ) {}
			} () );
			</script>
			<script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
			<script src="/js/prism.js"></script>
		</body>
	</html>
