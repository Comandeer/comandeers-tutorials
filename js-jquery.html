<!DOCTYPE html>
	<html lang="pl" dir="ltr" class="no-js">
		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<script>
			(function(H,c){H[c]=H[c].replace(/\bno-js\b/,'')+' js'})(document.documentElement,'className');

			if ( location.host === 'tutorials.comandeer.pl' ) {
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','//www.google-analytics.com/analytics.js','ga');


				ga('create', 'UA-33158520-2', 'auto');
				ga('send', 'pageview');
			}

			/*
			 Details primitive polyfill by Comandeer
			 */
			"open"in document.createElement("details")||document.addEventListener("DOMContentLoaded",function(){try{[].forEach.call(document.querySelectorAll("details"),function(e){var t=e.querySelector("summary"),n=function(n){n?(e.removeAttribute("open"),t.setAttribute("aria-expanded",!1)):(e.setAttribute("open","open"),t.setAttribute("aria-expanded",!0))},i=function(){n(e.hasAttribute("open"))};n(!e.hasAttribute("open")),t.setAttribute("tabindex",0),t.setAttribute("role","button"),t.addEventListener("click",i),t.addEventListener("keyup",function(e){-1!==[13,32].indexOf(e.keyCode)&&(e.preventDefault(),this.click())})})}catch(e){}})
			</script>
			<title>Czemu nie potrzebujesz jQuery?</title>
			<!--[if lt IE 9]>
				<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
			<![endif]-->
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
			<link rel="stylesheet" href="/css/prism.css">
			<link rel="stylesheet" href="/css/bs/custom.css">
		</head>
		<body>
			<header class="navbar navbar-inverse navbar-fixed-top">
				<div class="container-fluid">
					<div class="navbar-header">
						<a href="/" class="navbar-brand" title="« Powrót do spisu tutoriali">Tutorials</a>
					</div>
				</div>
			</header>

			<div class="container-fluid">
				<div class="row">
					<div class="col-md-8 col-md-offset-4">
						<h1 id="start">Czemu nie potrzebujesz jQuery?</h1>
					</div>
				</div>
				<div class="row">
					<nav class="sidebar col-md-4 well">
		<h2 class="sidebar-header">Spis treści</h2>
			<div class="sidebar-inner">
				<ul class="unstyled">
				<li><a href="#mimo">Mimo że zdaje ci się inaczej</a></li><li><a href="#alternatywa">Alternatywa?</a></li><li><a href="#dom">Podstawowe operacje DOM-owe</a><ul class="unstyled"><li><a href="#selektory">Wyszukiwanie po selektorach</a></li><li><a href="#chaining">Chainowanie metod</a></li><li><a href="#delegation">Event delegation</a></li><li><a href="#clone"><code>.clone</code></a></li><li><a href="#extend"><code>.extend</code></a></li></ul></li><li><a href="#animacje">Animacje</a></li><li><a href="#xhr">XHR</a></li><li><a href="#ui">jQUI</a></li><li><a href="#ale">Ale za to w jQ da się…</a></li><li><a href="#czy-porzucic">Czy porzucić?</a></li>
				</ul>
			</div>
		</nav>

					<main class="col-md-8 col-md-offset-0">
						<article>
						<div class="header"> <a class="header__link" href="#start" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>

<div class="header"><h2 class="header__heading" id="mimo">Mimo że zdaje ci się inaczej</h2><a class="header__link" href="#mimo" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Ten tutorial kieruję do wszystkich tych, którzy nie wyobrażają sobie wykonania jakiejkolwiek prostej czynności w JS bez użycia tej wszechstronnej biblioteki. Część zarzutów tyczy się też mnie, gdyż osobiście również korzystam z jQuery (hej, to nie moja wina, że DOM jest tak spaprany!)</p>


<div class="header"><h2 class="header__heading" id="alternatywa">Alternatywa?</h2><a class="header__link" href="#alternatywa" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p><a href="http://vanilla-js.com/" rel="noopener noreferrer">VanillaJS</a> + <a href="http://microjs.com/" rel="noopener noreferrer">jeden z tych maluczkich</a></p>


<div class="header"><h2 class="header__heading" id="dom">Podstawowe operacje DOM-owe</h2><a class="header__link" href="#dom" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>

<div class="header"><h3 class="header__heading" id="selektory">Wyszukiwanie po selektorach</h3><a class="header__link" href="#selektory" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Potęgą jQuery jest jego silniczek Sizzle, który pozwala wyszukać dowolny element tylko i wyłącznie na podstawie selektora. To jest często główny/jedyny powód, dla którego część webmasterów sięga po jQ.</p>
<p class="code">Kod:</p><pre><code class="language-javascript">$( '#bardzo &gt; optymalny .selektor #ktory .na-bank.dziala' );</code></pre>
<p class="alert alert-info">Oczywiście optymalizacja takich selektorów to zupełnie inna sprawa.</p>
<p>Skupmy się na tym, czy w czystym JS istnieje jakaś alternatywa dla tego pięknego owijacza? Otóż tak!</p>
<p class="code">Kod:</p><pre><code class="language-javascript">document.querySelectorAll( '#bardzo &gt; optymalny .selektor #ktory .na-bank.dziala' );</code></pre>
<p>Prawdę mówiąc, jeśli przyjrzymy się kodowi jQ, zauważymy, że wewnętrznie używa on właśnie tej metody. Nie trzeba chyba mówić, co jest szybsze. Oczywiście można pójść o krok dalej i zrobić sobie coś takiego:</p>
<p class="code">Kod:</p><pre><code class="language-javascript">var $ = document.querySelectorAll.bind( document );</code></pre>
<p>Voila! Mamy jQ bez jQ.</p>

<div class="header"><h3 class="header__heading" id="chaining">Chainowanie metod</h3><a class="header__link" href="#chaining" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Chainowanie metod to to, co decyduje o niezwykłej użyteczności jQ w zastosowaniach DOM-owych.</p>
<p class="code">Kod:</p><pre><code class="language-javascript">$( '&lt;a&gt;' ).attr( 'href', '#' ).on( 'click', function() {} );</code></pre>
<p>Owszem, w VanillaJS nie jestem w stanie uzyskać tak wygodnej obsługi DOM. Ale tu z pomocą przychodzi nam <a href="http://leaverou.github.com/chainvas/" rel="noopener noreferrer">Chainvas</a> – małe cudeńko, które jest w stanie złańcuchować <i>de facto</i> wszystko. Dzięki temu można spokojnie napisać:</p>
<p class="code">Kod:</p><pre><code class="language-javascript">document.createElement( 'a' ).setAttribute( 'href', '#' ).addEventListener( 'click', function() {} );</code></pre>
<p>I tym sposobem odebraliśmy jQ największą jego przewagę w operacjach DOM-owych, oszczędzając przy tym 31KB kodu (oczywiście mowa tu o wersjach gzipniętych i zminifikowanych).</p>

<div class="header"><h3 class="header__heading" id="delegation">Event delegation</h3><a class="header__link" href="#delegation" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>w jQ jest prosto:</p>
<p class="code">Kod:</p><pre><code class="language-javascript">$( document ).on( 'click', '.clicky', function( evt ) {
	//awesome stuff
} );</code></pre>
<p>w czystym JS też jest prosto</p>
<p class="code">Kod:</p><pre><code class="language-javascript">document.addEventListener( 'click', function( evt ) {
	if ( !evt.target || !e.target.matches( '.clicky' ) /* Można zmienić na !evt.target.classList.contains( 'clicky' )*/ ) {
		return;
	}
	//awesome stuff
}, false );</code></pre>

<div class="header"><h3 class="header__heading" id="clone"><code>.clone</code></h3><a class="header__link" href="#clone" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Żeby sklonować obiekt w jQ, wystarczy skorzystać z metody <code>.clone</code>. Czy da się zrobić coś takiego w czystym JS? A i owszem.</p>
<p class="code">Kod:</p><pre><code class="language-javascript">function clone( obj ) {
	return obj.cloneNode ? obj.cloneNode( obj ) : JSON.parse( JSON.stringify( obj ) );
}
console.log( clone( document.createElement( 'a' ) ) );</code></pre>
<p>Prosta i przyjemna sztuczka.</p>

<div class="header"><h3 class="header__heading" id="extend"><code>.extend</code></h3><a class="header__link" href="#extend" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>To już nie jest do końca DOM, ale może się tu nadać.</p>
<p>Jak wiadomo, w jQ mamy metodę <code>.extend</code> rozszerzającą nam obiekt:</p>
<p class="code">Kod:</p><pre><code class="language-javascript">console.log( $.extend( {}, { cos: 1 } ) );</code></pre>
<p>W czystym JS <a href="https://github.com/shimondoodkin/nodejs-clone-extend/blob/master/index.js#L40" rel="noopener noreferrer">też się da</a>. Ba, można być nawet chamskim i po prostu wyciągnąć ten kod z jQ.</p>


<div class="header"><h2 class="header__heading" id="animacje">Animacje</h2><a class="header__link" href="#animacje" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Co tu dużo mówić – od kiedy w CSS są <code>transition</code> i <code>animation</code>, większość rzeczy można w ogóle wyjąć poza JS. Natomiast niektóre inne animacje z jQ można równie łatwo napisać w czystym JS. Przykład, lekko poprawiony, ze strony VanillaJS:</p>
<p class="code">Kod:</p><pre><code class="language-javascript">$( '#thing' ).fadeOut();
//vs
var s = document.getElementById( 'd' ).style;
s.opacity = +( s.opacity || window.getComputedStyle( el )[ 'opacity' ] );
( function f() { ( s.opacity -= 1 / 100 ) &lt;= 0 ? s.display = "none" : requestAnimationFrame( f ) }() );</code></pre>
<p>Nie trzeba chyba zaznaczać, że porównanie objętościowe tych trzech linijek i całego jQ wypada korzystnie dla czystego JS.</p>
<p>oczywiście warto zauważyć, że rAF jest tylko w nowszych browserach i trza by zarzucić jakimś fallbackiem:</p>
<p class="code">Kod:</p><pre><code class="language-javascript">window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function( f ){ setTimeout( f, 1000 / 60 ); };</code></pre>


<div class="header"><h2 class="header__heading" id="xhr">XHR</h2><a class="header__link" href="#xhr" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Tu nie będzie przykładów, jedynie krótkie info.</p>
<p>Otóż wrapper w jQ jest cholernie wygodny i w ogóle. Jednak jeśli chcemy mieć dostęp do bardziej zaawansowanych własności obiektu xhr (np. <code>xhr.upload.progress</code>), <a href="https://github.com/malsup/form/blob/master/jquery.form.js#L258" rel="noopener noreferrer">trzeba użyć natywnego obiektu</a>.</p>


<div class="header"><h2 class="header__heading" id="ui">jQUI</h2><a class="header__link" href="#ui" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Wiele rzeczy <a href="http://pulpit.luke.co.pl/" rel="noopener noreferrer">da się napisać</a> bez tego, wystarcza trochę pomyślunku.</p>
<p>Szybki przykład na resize elementów (akurat wykorzystywany w zupełnie innym kontekście niż browserowy):</p>
<p class="code">Kod:</p><pre><code class="language-javascript">if ( &#91; 'l', 'r' &#93;.indexOf( resizing ) !== -1 ) {
	if ( resizing === 'l' ) {
		window.frame.width += x - e.pageX;
		window.frame.left -= x - e.pageX;
	} else {
		window.frame.width -= x - e.pageX;
	}

	if ( window.frame.width &lt; 60 ) {
		window.frame.width = 60;
	}

	x = e.pageX;
	y = e.pageY;
} else if ( &#91; 't', 'b' &#93;.indexOf( resizing ) !== -1 ) {
	if ( resizing === 't' ) {
		window.frame.height += y - e.pageY;
		window.frame.top -= y - e.pageY;
	} else {
		window.frame.height -= y - e.pageY;
	}

	if ( window.frame.height &lt; 120 ) {
		window.frame.height = 120;
	}

	x = e.pageX;
	y = e.pageY;
} else {
	window.frame.width -= x-e.pageX;
	window.frame.height -= y-e.pageY;
}</code></pre>
<p>co prawda kod najwyższych lotów nie jest i raczej przedstawia ogólną ideę jak to może wyglądać, niż jak to powinno wyglądać. Ba, można zdać się na natywne funkcje, takie jak <code>resize</code> w CSS (miało działać na wszystkim, ale nie wiem czy ta obietnica jest spełniona) i drag&drop (w IE od wersji 5 bodaj!). Dobitnie to pokazuje, że nawet tak skomplikowane czynności jakie wykonuje za nas jQUI można zrobić zarówno bez niego, jak i jego ojca – jQ.</p>



<div class="header"><h2 class="header__heading" id="ale">Ale za to w jQ da się…</h2><a class="header__link" href="#ale" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Z racji tego, że jQ jest tylko subsetem JS, śmiem twierdzić, że nie ma rzeczy, której nie dałoby się osiągnąć w czystym JS. Jestem w stanie podjąć każde wyzwanie i udowodnić, że się da bez!</p>

<div class="header"><h2 class="header__heading" id="czy-porzucic">Czy porzucić?</h2><a class="header__link" href="#czy-porzucic" title="Bezpo&#x15B;redni link do sekcji"><span class="glyphicon glyphicon-link" aria-hidden="true"></span><span class="sr-only">Bezpośredni link do sekcji</span></a></div>
<p>Nie trzeba. Sam używam i jestem zadowolony. Cały problem polega na tym, że jQuery jest przedstawiane jako lekarstwo na wszelkie zło JS, a to po prostu wierutna bzdura. jQuery powstało jako helper DOM-owy i to wciąż jest jego główną siłą.</p>
<p>Co więcej, jQuery niszczy świadomość programistów sieciowych. Coraz częściej można spotkać bowiem nie programistów JS, a programistów jQuery, którzy jedynie tą biblioteką są w stanie się posługiwać.</p>
<p>Dlatego nie mówię, żeby przestać jQ używać. Jeśli natomiast do stronki, gdzie trza oskryptować jeden link, wsadzasz jQ, to znak, że coś jest nie tego. Jeśli natomiast umiesz zastąpić jQ <a href="http://www.forumweb.pl/javascript/cancelbubble-stoppropagation-problem/397808#397808" rel="noopener noreferrer">własnym rozwiązaniem</a> i robisz to, gdy potrzebujesz jedną, konkretną rzecz, to oznacza, że jesteś zupełnie normalnym użytkownikiem tej biblioteki i syndrom uzależnienia Ciebie nie dotyczy.</p>

						</article>
						<section id="komentarze">
							<h2>Komentarze</h2>
							<div id="disqus_thread"></div>
							<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
							<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
						</section>
					</main>
				</div>
			</div>

			<footer class="site-footer">
				<div class="container-fluid">
					<p>Copyright © by <a href="https://www.comandeer.pl" rel="author">Comandeer</a>.</p>
				</div>
			</footer>

			<script>
			( function() {
				try {
					var codes = document.getElementsByClassName( 'code' );

					[].forEach.call( codes, function( code ) {
						var next = code.nextElementSibling;

						if ( !next || next.tagName.toLowerCase() !== 'pre' || next.scrollHeight < 300 ) {
							return false;
						}

						code.innerHTML = code.innerHTML.replace( ':', ' <span class="code-switch">[Rozwiń]</span>:' );
						code.getElementsByTagName( 'span' )[ 0 ].toSwitch = next;
					} );

					document.addEventListener( 'click', function( evt ) {
						if ( !evt.target || !evt.target.classList.contains( 'code-switch' ) ) {
							return true;
						}

						evt.preventDefault();

						var target = evt.target,
							next = target.toSwitch,
							html = target.innerHTML;

						if ( !next || next.tagName.toLowerCase() !== 'pre' ) {
							return false;
						}

						next.classList.toggle( 'expanded' );
						target.innerHTML = ( html === '[Zwiń]' ? '[Rozwiń]' : '[Zwiń]' );
					} );

					//defer loading of disqus

					if ( location.host === 'tutorials.comandeer.pl' ) {
						window.disqus_shortname = 'comandeerowa';

						var dsq = document.createElement( 'script' );

						dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';

						( document.getElementsByTagName( 'head' )[ 0 ] || document.getElementsByTagName( 'body' )[ 0 ] ).appendChild( dsq );
					}
				} catch( err ) {}
			} () );
			</script>
			<script src="https://code.jquery.com/jquery-1.12.0.min.js" integrity="sha384-XxcvoeNF5V0ZfksTnV+bejnCsJjOOIzN6UVwF85WBsAnU3zeYh5bloN+L4WLgeNE" crossorigin="anonymous"></script>
			<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
			<script>
			$( 'nav' ).on( 'affix.bs.affix', function() {
				$( 'main' ).removeClass( 'col-md-offset-0' ).addClass( 'col-md-offset-4' );
			} ).on( 'affix-top.bs.affix affix-bottom.bs.affix', function() {
				$( 'main' ).removeClass( 'col-md-offset-4' );
			} ).affix( {
				offset: {
					top: function() {
						return ( this.top = $( '.navbar-fixed-top' ).outerHeight( true ) + 10 );
					},
					bottom: function () {
						return ( this.bottom = $( '.site-footer' ).outerHeight( true ) + 10 );
					}
				}
			} )
			</script>
			<script src="/js/prism.js"></script>
		</body>
	</html>
